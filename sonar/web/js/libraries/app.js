this["Templates"]=this["Templates"]||{};this["Templates"]["libraries"]=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression,i="function",j="        <li>\n          "+h((b.qualifierIcon||a&&a.qualifierIcon||g).call(a,a!=null?a.qualifier:a,{name:"qualifierIcon",hash:{},data:d}))+'\n          <span class="libraries-tree-name">'+h((f=(f=b.lname||(a!=null?a.lname:a))!=null?f:g,typeof f===i?f.call(a,{name:"lname",hash:{},data:d}):f))+"</span>\n";e=b["if"].call(a,a!=null?a.version:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.noop,data:d});if(e!=null){j+=e}e=(b.notEmpty||a&&a.notEmpty||g).call(a,a!=null?a.libraries:a,{name:"notEmpty",hash:{},fn:this.program(4,d),inverse:this.program(20,d),data:d});if(e!=null){j+=e}return j+"        </li>\n"},2:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'            <span class="libraries-tree-version">'+h((e=(e=b.version||(a!=null?a.version:a))!=null?e:g,typeof e===f?e.call(a,{name:"version",hash:{},data:d}):e))+"</span>\n"},4:function(a,b,c,d){var e,f=b.helperMissing,g="            <ul>\n";e=(b.recursive||a&&a.recursive||f).call(a,a!=null?a.libraries:a,{name:"recursive",hash:{},fn:this.program(5,d),inverse:this.noop,data:d});if(e!=null){g+=e}return g+"            </ul>\n"},5:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression,i="function",j='                <li class="';e=b["if"].call(a,a!=null?a.to:a,{name:"if",hash:{},fn:this.program(6,d),inverse:this.noop,data:d});if(e!=null){j+=e}j+=" ";e=(b.eq||a&&a.eq||g).call(a,a!=null?a.u:a,"test",{name:"eq",hash:{},fn:this.program(8,d),inverse:this.noop,data:d});if(e!=null){j+=e}j+='">\n                  ';e=b["if"].call(a,a!=null?a.to:a,{name:"if",hash:{},fn:this.program(10,d),inverse:this.noop,data:d});if(e!=null){j+=e}j+="\n                  "+h((b.qualifierIcon||a&&a.qualifierIcon||g).call(a,a!=null?a.q:a,{name:"qualifierIcon",hash:{},data:d}))+'\n                  <span class="libraries-tree-name">'+h((f=(f=b.n||(a!=null?a.n:a))!=null?f:g,typeof f===i?f.call(a,{name:"n",hash:{},data:d}):f))+"</span>";e=b["if"].call(a,a!=null?a.to:a,{name:"if",hash:{},fn:this.program(12,d),inverse:this.noop,data:d});if(e!=null){j+=e}j+="\n";e=b["if"].call(a,a!=null?a.v:a,{name:"if",hash:{},fn:this.program(14,d),inverse:this.noop,data:d});if(e!=null){j+=e}e=b["if"].call(a,a!=null?a.u:a,{name:"if",hash:{},fn:this.program(16,d),inverse:this.noop,data:d});if(e!=null){j+=e}e=b["if"].call(a,a!=null?a.to:a,{name:"if",hash:{},fn:this.program(18,d),inverse:this.noop,data:d});if(e!=null){j+=e}return j+"                </li>\n"},6:function(a,b,c,d){return"libraries-tree-with-subtree libraries-tree-subtree-collapsed"},8:function(a,b,c,d){return"libraries-tree-test"},10:function(a,b,c,d){return"<a>"},12:function(a,b,c,d){return"</a>"},14:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'                    <span class="libraries-tree-version">'+h((e=(e=b.v||(a!=null?a.v:a))!=null?e:g,typeof e===f?e.call(a,{name:"v",hash:{},data:d}):e))+"</span>\n"},16:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'                    <span class="subtitle">('+h((e=(e=b.u||(a!=null?a.u:a))!=null?e:g,typeof e===f?e.call(a,{name:"u",hash:{},data:d}):e))+")</span>\n"},18:function(a,b,c,d){var e,f=b.helperMissing,g="                    <ul>";e=(b.recursive||a&&a.recursive||f).call(a,a!=null?a.to:a,{name:"recursive",hash:{},data:d});if(e!=null){g+=e}return g+"</ul>\n"},20:function(a,b,c,d){var e=b.helperMissing,f=this.escapeExpression;return"            "+f((b.t||a&&a.t||e).call(a,"libs.noLibraries",{name:"t",hash:{},data:d}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g=b.helperMissing,h=this.escapeExpression,i="function",j='<div class="page">\n  <header class="page-header">\n    <h1 class="page-title">'+h((b.t||a&&a.t||g).call(a,"libraries.page",{name:"t",hash:{},data:d}))+'</h1>\n  </header>\n\n  <div class="libraries-header">\n    <div class="libraries-header-filter">\n      <label for="libraries-filter">'+h((b.t||a&&a.t||g).call(a,"libs.filter",{name:"t",hash:{},data:d}))+' </label>\n      <input id="libraries-filter" type="text" class="js-libraries-filter">\n    </div>\n\n    <div class="libraries-header-test">\n      <input type="checkbox" id="display-test-libraries" class="js-test-libraries">\n      <label for="display-test-libraries">'+h((b.t||a&&a.t||g).call(a,"libs.displayTests",{name:"t",hash:{},data:d}))+'</label>\n    </div>\n\n    <div class="libraries-header-actions">\n      <a class="js-libraries-collapse-all">'+h((b.t||a&&a.t||g).call(a,"libs.collapse",{name:"t",hash:{},data:d}))+'</a>\n      <a class="js-libraries-expand-all">'+h((b.t||a&&a.t||g).call(a,"libs.expand",{name:"t",hash:{},data:d}))+'</a>\n    </div>\n\n    <div class="libraries-header-actions">\n      <a href="'+h((f=(f=b.usagesUrl||(a!=null?a.usagesUrl:a))!=null?f:g,typeof f===i?f.call(a,{name:"usagesUrl",hash:{},data:d}):f))+'">'+h((b.t||a&&a.t||g).call(a,"libs.usageLink",{name:"t",hash:{},data:d}))+'</a>\n    </div>\n  </div>\n\n  <div class="libraries-tree">\n    <ul>\n';e=b.each.call(a,a!=null?a.items:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d});if(e!=null){j+=e}return j+"    </ul>\n  </div>\n</div>\n"},useData:true});define("templates/libraries",function(){});(function(){var a={}.hasOwnProperty,b=function(b,c){for(var d in c){if(a.call(c,d))b[d]=c[d]}function e(){this.constructor=b}e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};define("libraries/view",["templates/libraries"],function(){var a;a=jQuery;return function(c){b(d,c);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.template=Templates["libraries"];d.prototype.ui={filter:".js-libraries-filter",collapseAll:".js-libraries-collapse-all",expandAll:".js-libraries-expand-all"};d.prototype.events={"change .js-test-libraries":"toggleTestLibraries","click @ui.collapseAll":"collapseAll","click @ui.expandAll":"expandAll","click .libraries-tree-with-subtree > a":"toggleSubTree"};d.prototype.onRender=function(){var a,b;this.toggleActions();b=_.bind(this.filter,this);a=_.debounce(b,250);return this.ui.filter.off("keyup").on("keyup",a)};d.prototype.filter=function(b){var c;c=a(b.currentTarget).val();this.expandAll();this.$(".libraries-tree li").addClass("libraries-tree-subtree-hidden");return this.$(".libraries-tree li").each(function(b){return function(d,e){var f;f=a(e).children(".libraries-tree-name").text();if(f.match(new RegExp(c,"i"))){return b.showTree(a(e))}}}(this))};d.prototype.showTree=function(a){a.removeClass("libraries-tree-subtree-hidden");return a.parents(".libraries-tree-subtree-hidden").removeClass("libraries-tree-subtree-hidden")};d.prototype.toggleTestLibraries=function(){return this.$(".libraries-tree").toggleClass("libraries-tree-show-tests")};d.prototype.collapseAll=function(){this.$(".libraries-tree-with-subtree").addClass("libraries-tree-subtree-collapsed");return this.toggleActions()};d.prototype.expandAll=function(){this.$(".libraries-tree-with-subtree").removeClass("libraries-tree-subtree-collapsed");return this.toggleActions()};d.prototype.toggleSubTree=function(b){var c;c=a(b.currentTarget).parent();c.toggleClass("libraries-tree-subtree-collapsed");return this.toggleActions()};d.prototype.toggleActions=function(){var a,b;b=this.$(".libraries-tree-with-subtree").length;a=this.$(".libraries-tree-subtree-collapsed").length;this.ui.collapseAll.toggle(b>a);return this.ui.expandAll.toggle(a>0)};d.prototype.serializeData=function(){return _.extend(d.__super__.serializeData.apply(this,arguments),{usagesUrl:""+baseUrl+"/dependencies/index?search="+window.resourceKey})};return d}(Marionette.ItemView)})}).call(this);(function(){requirejs.config({baseUrl:""+baseUrl+"/js"});requirejs(["libraries/view"],function(a){var b,c,d,e,f;b=jQuery;e=""+baseUrl+"/api/resources";d=""+baseUrl+"/api/dependency_tree";c=new Marionette.Application;c.addInitializer(function(){return b.get(e,{resource:window.resourceKey,scopes:"PRJ",depth:-1},function(c){var e,f;e=new Backbone.Collection(c);f=e.map(function(a){var c;c=a.get("id");return b.get(d,{resource:c,scopes:"PRJ"},function(b){return a.set("libraries",b)})});return b.when.apply(b,f).done(function(c){return function(){e.reset(e.reject(function(a){return(a.get("id")===window.resourceKey||a.get("key")===window.resourceKey)&&a.get("libraries").length===0}));c.view=new a({app:c,collection:e});return b("#project-libraries").empty().append(c.view.render().el)}}(this))})});f=window.requestMessages();return jQuery.when(f).done(function(){return c.start()})})}).call(this);define("libraries/app",function(){});