(function(){var a={}.hasOwnProperty,b=function(b,c){for(var d in c){if(a.call(c,d))b[d]=c[d]}function e(){this.constructor=b}e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};define("dashboard/models/widget",[],function(){return function(a){b(c,a);function c(){return c.__super__.constructor.apply(this,arguments)}c.prototype.defaults=function(){return{col:1,row:0,props:[],configured:false}};c.prototype.mergeProperties=function(a){var b;b=this.get("properties");b=a.map(function(a){var c;c=_.findWhere(b,{key:a.key});return _.extend(a,c)});return this.set("properties",b)};return c}(Backbone.Model)})}).call(this);(function(){var a={}.hasOwnProperty,b=function(b,c){for(var d in c){if(a.call(c,d))b[d]=c[d]}function e(){this.constructor=b}e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};define("dashboard/collections/widgets",["dashboard/models/widget"],function(a){return function(c){b(d,c);function d(){return d.__super__.constructor.apply(this,arguments)}d.prototype.model=a;d.prototype.comparator=function(a){return a.get("row")};return d}(Backbone.Collection)})}).call(this);Handlebars.registerPartial("_widget-props",Handlebars.template({1:function(a,b,c,d,e){var f,g=b.helperMissing,h=this.escapeExpression,i='      <tr>\n        <td class="form-key-cell">\n          '+h((b.t||a&&a.t||g).call(a,"widget",e[1]!=null?e[1].key:e[1],"property",a!=null?a.key:a,"name",{name:"t",hash:{},data:d}))+"\n          ";f=b.unless.call(a,a!=null?a.optional:a,{name:"unless",hash:{},fn:this.program(2,d,e),inverse:this.noop,data:d});if(f!=null){i+=f}i+='\n        </td>\n        <td class="form-val-cell">\n';f=(b.eq||a&&a.eq||g).call(a,a!=null?a.type:a,"FILTER",{name:"eq",hash:{},fn:this.program(4,d,e),inverse:this.noop,data:d});if(f!=null){i+=f}f=(b.eq||a&&a.eq||g).call(a,a!=null?a.type:a,"INTEGER",{name:"eq",hash:{},fn:this.program(8,d,e),inverse:this.noop,data:d});if(f!=null){i+=f}f=(b.eq||a&&a.eq||g).call(a,a!=null?a.type:a,"BOOLEAN",{name:"eq",hash:{},fn:this.program(10,d,e),inverse:this.noop,data:d});if(f!=null){i+=f}i+="\n";f=b["if"].call(a,a!=null?a.defaultValue:a,{name:"if",hash:{},fn:this.program(12,d,e),inverse:this.noop,data:d});if(f!=null){i+=f}return i+"        </td>\n      </tr>\n"},2:function(a,b,c,d){return"*"},4:function(a,b,c,d,e){var f,g,h="function",i=b.helperMissing,j=this.escapeExpression,k='            <select name="'+j((g=(g=b.key||(a!=null?a.key:a))!=null?g:i,typeof g===h?g.call(a,{name:"key",hash:{},data:d}):g))+'">\n';f=b.each.call(a,a!=null?a.options:a,{name:"each",hash:{},fn:this.program(5,d,e),inverse:this.noop,data:d});if(f!=null){k+=f}return k+'            </select>\n            <a href="'+j((g=(g=b.baseUrl||(a!=null?a.baseUrl:a))!=null?g:i,typeof g===h?g.call(a,{name:"baseUrl",hash:{},data:d}):g))+'/measures/manage">Edit my filters</a>\n'},5:function(a,b,c,d,e){var f,g=this.lambda,h=this.escapeExpression,i=b.helperMissing,j='                <option value="'+h(g(d&&d.key,a))+'" ';f=(b.eq||a&&a.eq||i).call(a,d&&d.key,e[1]!=null?e[1].value:e[1],{name:"eq",hash:{},fn:this.program(6,d,e),inverse:this.noop,data:d});if(f!=null){j+=f}return j+">"+h(g(a,a))+"</option>\n"},6:function(a,b,c,d){return"selected"},8:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'            <input value="'+h((e=(e=b.value||(a!=null?a.value:a))!=null?e:g,typeof e===f?e.call(a,{name:"value",hash:{},data:d}):e))+'" name="'+h((e=(e=b.key||(a!=null?a.key:a))!=null?e:g,typeof e===f?e.call(a,{name:"key",hash:{},data:d}):e))+'" type="text" size="10">\n'},10:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'            <input type="checkbox" name="'+h((e=(e=b.key||(a!=null?a.key:a))!=null?e:g,typeof e===f?e.call(a,{name:"key",hash:{},data:d}):e))+'">\n'},12:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'            <div class="form-val-note">Default: '+h((e=(e=b.defaultValue||(a!=null?a.defaultValue:a))!=null?e:g,typeof e===f?e.call(a,{name:"defaultValue",hash:{},data:d}):e))+"</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e){var f,g='<form class="js-edit-widget-form">\n  <table class="table width100">\n    <tbody>\n\n';f=b.each.call(a,a!=null?a.properties:a,{name:"each",hash:{},fn:this.program(1,d,e),inverse:this.noop,data:d});if(f!=null){g+=f}return g+'\n    <tr>\n      <td colspan="2">\n        <input type="submit" value="Save">\n        <a class="js-cancel-edit-widget">Cancel</a>\n      </td>\n    </tr>\n    </tbody>\n  </table>\n</form>\n'},useData:true,useDepths:true}));this["Templates"]=this["Templates"]||{};this["Templates"]["widget"]=Handlebars.template({1:function(a,b,c,d){var e,f,g=b.helperMissing,h="function",i=this.escapeExpression,j='\n  <div class="widget-header">\n    <div class="widget-actions">\n      ';e=(b.notEmpty||a&&a.notEmpty||g).call(a,a!=null?a.properties:a,{name:"notEmpty",hash:{},fn:this.program(2,d),inverse:this.noop,data:d});if(e!=null){j+=e}j+='\n      <a class="js-delete-widget">Delete</a>\n    </div>\n    <div class="widget-handle">'+i((f=(f=b.name||(a!=null?a.name:a))!=null?f:g,typeof f===h?f.call(a,{name:"name",hash:{},data:d}):f))+'</div>\n  </div>\n\n  <div class="widget_props hidden">\n';e=this.invokePartial(c["_widget-props"],"    ","_widget-props",a,undefined,b,c,d);if(e!=null){j+=e}j+='  </div>\n\n  <div class="configure_widget">\n    <div class="transparent"></div>\n    <div class="widget">\n        ';e=b["if"].call(a,a!=null?a.html:a,{name:"if",hash:{},fn:this.program(4,d),inverse:this.program(6,d),data:d});if(e!=null){j+=e}return j+"\n    </div>\n  </div>\n\n"},2:function(a,b,c,d){return'<a class="js-edit-widget">Edit</a>'},4:function(a,b,c,d){var e,f,g="function",h=b.helperMissing;e=(f=(f=b.html||(a!=null?a.html:a))!=null?f:h,typeof f===g?f.call(a,{name:"html",hash:{},data:d}):f);if(e!=null){return e}else{return""}},6:function(a,b,c,d){return'<i class="spinner spinner-margin"></i>'},8:function(a,b,c,d){var e,f='\n  <div class="widget">\n    ';e=b["if"].call(a,a!=null?a.html:a,{name:"if",hash:{},fn:this.program(4,d),inverse:this.program(6,d),data:d});if(e!=null){f+=e}return f+"\n  </div>\n\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";e=b["if"].call(a,(e=a!=null?a.state:a)!=null?e.configure:e,{name:"if",hash:{},fn:this.program(1,d),inverse:this.program(8,d),data:d});if(e!=null){f+=e}return f},usePartial:true,useData:true});this["Templates"]["widgets"]=Handlebars.template({1:function(a,b,c,d){var e=b.helperMissing,f=this.escapeExpression;return'      <button class="js-configure-widgets">'+f((b.t||a&&a.t||e).call(a,"dashboard.configure_widgets",{name:"t",hash:{},data:d}))+"</button>\n"},3:function(a,b,c,d){var e=b.helperMissing,f=this.escapeExpression;return'      <button class="js-back-to-dashboard">'+f((b.t||a&&a.t||e).call(a,"dashboard.back_to_dashboard",{name:"t",hash:{},data:d}))+"</button>\n"},5:function(a,b,c,d){var e,f=b.helperMissing,g='  <div id="configure">\n';e=(b.notEmpty||a&&a.notEmpty||f).call(a,(e=a!=null?a.state:a)!=null?e.widgets:e,{name:"notEmpty",hash:{},fn:this.program(6,d),inverse:this.program(9,d),data:d});if(e!=null){g+=e}return g+'\n  <div id="edit-layout">\n\n    <div class="select-layout ">\n      <a href="/dashboard/set_layout?did=51&amp;layout=100%25"\n         onclick="var f = document.createElement(\'form\'); f.style.display = \'none\'; this.parentNode.appendChild(f); f.method = \'POST\'; f.action = this.href;f.submit();return false;"\n         title="100%"><img alt="Layout100" src="/images/layout100.png?1406710293"></a>\n    </div>\n\n    <div class="select-layout selected">\n      <a href="/dashboard/set_layout?did=51&amp;layout=50%25-50%25"\n         onclick="var f = document.createElement(\'form\'); f.style.display = \'none\'; this.parentNode.appendChild(f); f.method = \'POST\'; f.action = this.href;f.submit();return false;"\n         title="50%-50%"><img alt="Layout5050" src="/images/layout5050.png?1406710293"></a>\n    </div>\n\n    <div class="select-layout ">\n      <a href="/dashboard/set_layout?did=51&amp;layout=30%25-70%25"\n         onclick="var f = document.createElement(\'form\'); f.style.display = \'none\'; this.parentNode.appendChild(f); f.method = \'POST\'; f.action = this.href;f.submit();return false;"\n         title="30%-70%"><img alt="Layout3070" src="/images/layout3070.png?1406710293"></a>\n    </div>\n\n    <div class="select-layout ">\n      <a href="/dashboard/set_layout?did=51&amp;layout=70%25-30%25"\n         onclick="var f = document.createElement(\'form\'); f.style.display = \'none\'; this.parentNode.appendChild(f); f.method = \'POST\'; f.action = this.href;f.submit();return false;"\n         title="70%-30%"><img alt="Layout7030" src="/images/layout7030.png?1406710293"></a>\n    </div>\n\n    <div class="select-layout ">\n      <a href="/dashboard/set_layout?did=51&amp;layout=33%25-33%25-33%25"\n         onclick="var f = document.createElement(\'form\'); f.style.display = \'none\'; this.parentNode.appendChild(f); f.method = \'POST\'; f.action = this.href;f.submit();return false;"\n         title="33%-33%-33%"><img alt="Layout333333" src="/images/layout333333.png?1406710293"></a>\n    </div>\n\n  </div>\n  </div>\n'},6:function(a,b,c,d){var e,f='      <div id="widget_defs">\n        <table class="width100">\n          <tbody>\n          <tr style="line-height: 20px;text-align: right">\n            <td valign="top">\n              <ul class="horizontal widget_categs" id="widget-filters">\n                <li>Category:</li>\n                <li class="selected">\n                  <a id="widget-filter-none">Any</a>\n                </li>\n                <li>\n                  <a id="widget-filter-Design">Design</a>\n                </li>\n                <li>\n                  <a id="widget-filter-Filters">Filters</a>\n                </li>\n                <li>\n                  <a id="widget-filter-Global">Global</a>\n                </li>\n                <li>\n                  <a id="widget-filter-History">History</a>\n                </li>\n                <li>\n                  <a id="widget-filter-Hotspots">Hotspots</a>\n                </li>\n                <li>\n                  <a id="widget-filter-Issues">Issues</a>\n                </li>\n                <li>\n                  <a id="widget-filter-Technical%20Debt">Technical Debt</a>\n                </li>\n                <li>\n                  <a id="widget-filter-Tests">Tests</a>\n                </li>\n              </ul>\n            <td nowrap="" valign="top">\n              Search:\n              <input id="filter-widget-box" name="filter-widget-box" size="10" type="text" disabled>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n\n';e=b.each.call(a,(e=a!=null?a.state:a)!=null?e.widgets:e,{name:"each",hash:{},fn:this.program(7,d),inverse:this.noop,data:d});if(e!=null){f+=e}return f+"      </div>\n"},7:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'          <div class="widget_def" style="display: inline-block;">\n            <p><b>'+h((e=(e=b.name||(a!=null?a.name:a))!=null?e:g,typeof e===f?e.call(a,{name:"name",hash:{},data:d}):e))+"</b></p>\n            <p>"+h((e=(e=b.description||(a!=null?a.description:a))!=null?e:g,typeof e===f?e.call(a,{name:"description",hash:{},data:d}):e))+'</p>\n            <p><button class="js-add-widget" data-key="'+h((e=(e=b.key||(a!=null?a.key:a))!=null?e:g,typeof e===f?e.call(a,{name:"key",hash:{},data:d}):e))+'">Add Widget</button></p>\n          </div>\n'},9:function(a,b,c,d){return'      <i class="spinner spinner-margin"></i>\n'},11:function(a,b,c,d){return'  <div class="dashboard-column-wrapper" style="width: 50%;margin: 0 -1px 0 0;">\n    <div class="dashboard-column" style="margin: 0 5px 0 0;">\n\n    </div>\n  </div>\n  <div class="dashboard-column-wrapper" style="width: 50%;margin: 0 -1px 0 0;">\n    <div class="dashboard-column" style="margin: 0 0 0 5px;">\n\n    </div>\n  </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<div class="line-block">\n  <div class="operations noprint button-group">\n';e=b.unless.call(a,(e=a!=null?a.state:a)!=null?e.configure:e,{name:"unless",hash:{},fn:this.program(1,d),inverse:this.program(3,d),data:d});if(e!=null){j+=e}j+='    <a class="button" href="'+i((f=(f=b.manageDashboardsUrl||(a!=null?a.manageDashboardsUrl:a))!=null?f:h,typeof f===g?f.call(a,{name:"manageDashboardsUrl",hash:{},data:d}):f))+'">'+i((b.t||a&&a.t||h).call(a,"dashboard.manage_dashboards",{name:"t",hash:{},data:d}))+"</a>\n  </div>\n</div>\n\n";e=b["if"].call(a,(e=a!=null?a.state:a)!=null?e.configure:e,{name:"if",hash:{},fn:this.program(5,d),inverse:this.noop,data:d});if(e!=null){j+=e}j+="\n";e=(b.eq||a&&a.eq||h).call(a,(e=a!=null?a.dashboard:a)!=null?e.layout:e,"50%-50%",{name:"eq",hash:{},fn:this.program(11,d),inverse:this.noop,data:d});if(e!=null){j+=e}return j},useData:true});define("templates/dashboard",function(){});(function(){var a={}.hasOwnProperty,b=function(b,c){for(var d in c){if(a.call(c,d))b[d]=c[d]}function e(){this.constructor=b}e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};define("dashboard/views/widget-view",["templates/dashboard"],function(a){var c;c=jQuery;return function(d){b(e,d);function e(){return e.__super__.constructor.apply(this,arguments)}e.prototype.template=a["widget"];e.prototype.className="block";e.prototype.events={"click .js-edit-widget":"editWidget","click .js-cancel-edit-widget":"cancelEditWidget","submit .js-edit-widget-form":"saveWidget"};e.prototype.initialize=function(a){if(this.model.get("configured")){return this.requestContent()}};e.prototype.onRender=function(){this.$el.data("id",this.model.id);if(this.options.app.state.get("configure")){return this.$el.prop("draggable",true)}};e.prototype.requestContent=function(){var a;a={id:this.model.get("key")};if(this.options.app.resource){a.resource=this.options.app.resource}if(this.model.has("componentId")){a.resource=this.model.get("componentId")}_.extend(a,this.getWidgetProps());return c.get(""+baseUrl+"/widget/show",a,function(a){return function(b){a.model.set("html",b);return a.render()}}(this))};e.prototype.getWidgetProps=function(){var a,b;a=this.model.get("props");b={};a.forEach(function(a){if(a.val!=null){return b[a.key]=a.val}});return b};e.prototype.editWidget=function(){return c.get(""+baseUrl+"/api/dashboards/configure_widget",{id:this.model.get("key")},function(a){return function(b){a.model.mergeProperties(b.widget.properties);return a.showEditForm()}}(this))};e.prototype.showEditForm=function(a){if(a==null){a=true}if(a){this.render()}this.$(".widget_props").removeClass("hidden");return this.$(".configure_widget").addClass("hidden")};e.prototype.cancelEditWidget=function(){this.$(".widget_props").addClass("hidden");return this.$(".configure_widget").removeClass("hidden")};e.prototype.saveWidget=function(a){var b;a.preventDefault();b={id:this.model.id};this.$(".js-edit-widget-form").serializeArray().forEach(function(a){return b[a.name]=a.value});return c.post(""+baseUrl+"/api/dashboards/save_widget",b,function(a){return function(b){a.model.set(b.widget);return a.requestContent()}}(this))};e.prototype.serializeData=function(){return _.extend(e.__super__.serializeData.apply(this,arguments),{baseUrl:baseUrl,state:this.options.app.state.toJSON()})};return e}(Marionette.ItemView)})}).call(this);(function(){var a={}.hasOwnProperty,b=function(b,c){for(var d in c){if(a.call(c,d))b[d]=c[d]}function e(){this.constructor=b}e.prototype=c.prototype;b.prototype=new e;b.__super__=c.prototype;return b};define("dashboard/views/widgets-view",["templates/dashboard","dashboard/models/widget","dashboard/views/widget-view"],function(a,c,d){var e;e=jQuery;return function(f){b(g,f);function g(){return g.__super__.constructor.apply(this,arguments)}g.prototype.template=a["widgets"];g.prototype.itemView=d;g.prototype.itemViewContainer=".dashboard-column";g.prototype.events={"click .js-configure-widgets":"configureWidgets","click .js-back-to-dashboard":"stopConfigureWidgets","click .js-add-widget":"addWidget"};g.prototype.initialize=function(a){return this.listenTo(a.app.state,"change",this.render)};g.prototype.itemViewOptions=function(){return{app:this.options.app}};g.prototype.appendHtml=function(a,b){var c,d,e,f,g;f=b.model.get("col")-1;g=b.model.get("row");d=this.getItemViewContainer(a);c=d.eq(f);e=c.children();if(e.size()<=g){return c.append(b.el)}else{return e.eq(g).before(b.el)}};g.prototype.onRender=function(){if(this.options.app.state.get("configure")){return this.initializeDragging()}};g.prototype.initializeDragging=function(){var a,b,c,d,f;a=this.$(".block");b=this.$(".column-handle");c=null;d=function(a){return e(a.currentTarget).removeClass("block-hover")};f=function(a){return function(b){b.preventDefault();c.detach().insertBefore(e(b.currentTarget));d(b);return a.options.app.saveDashboard()}}(this);a.on("selectstart",function(){this.dragDrop();return false});a.on("dragstart",function(a){a.originalEvent.dataTransfer.setData("Text","drag");c=e(this);return b.show()});a.on("dragover",function(a){if(c.data("id")!==e(this).data("id")){a.preventDefault();return e(a.currentTarget).addClass("block-hover")}});a.on("drop",f);a.on("dragleave",d);b.on("dragover",function(a){a.preventDefault();return e(a.currentTarget).addClass("block-hover")});b.on("drop",f);return b.on("dragleave",d)};g.prototype.configureWidgets=function(){this.options.app.state.set({configure:true});if(!this.options.app.state.has("widgets")){return e.get(""+baseUrl+"/api/dashboards/widgets",function(a){return function(b){return a.options.app.state.set({widgets:b.widgets})}}(this))}};g.prototype.stopConfigureWidgets=function(){return this.options.app.state.set({configure:false})};g.prototype.getLayout=function(){var a;return a=e(".dashboard-column").map(function(){var a;a=e(this).find(".block");return a.map(function(){return e(this).data("id")}).get().join(",")}).get().join(";")};g.prototype.addWidget=function(a){var b,d,f,g;b=e(a.currentTarget).data("key");f=_.findWhere(this.options.app.state.get("widgets"),{key:b});d=new c(f);this.collection.add(d);g=this.children.findByModel(d);return g.editWidget()};g.prototype.serializeData=function(){return _.extend(g.__super__.serializeData.apply(this,arguments),{dashboard:this.options.dashboard.toJSON(),manageDashboardsUrl:""+baseUrl+"/dashboards",state:this.options.app.state.toJSON()})};return g}(Marionette.CompositeView)})}).call(this);(function(a){var b=a.ajax,c=[],d=[],e=/=\?(&|$)/,f=(new Date).getTime();function g(b){if(window.DOMParser==undefined&&window.ActiveXObject){DOMParser=function(){};DOMParser.prototype.parseFromString=function(a){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b}}try{var c=(new DOMParser).parseFromString(b,"text/xml");if(a.isXMLDoc(c)){var d=a("parsererror",c);if(d.length==1){throw"Error: "+a(c).text()}}else{throw"Unable to parse XML"}return c}catch(e){var f=e.name==undefined?e:e.name+": "+e.message;a(document).trigger("xmlParseError",[f]);return undefined}}function h(b,c,d){(b.context?a(b.context):a.event).trigger(c,d)}function i(b,c){var d=true;if(typeof c==="string"){return a.isFunction(b.test)?b.test(c):b==c}a.each(b,function(e){if(c[e]===undefined){d=false;return d}else{if(typeof c[e]==="object"&&c[e]!==null){d=d&&i(b[e],c[e])}else{if(b[e]&&a.isFunction(b[e].test)){d=d&&b[e].test(c[e])}else{d=d&&b[e]==c[e]}}}});return d}function j(b,c){return b[c]===a.mockjaxSettings[c]}function k(b,c){if(a.isFunction(b)){return b(c)}if(a.isFunction(b.url.test)){if(!b.url.test(c.url)){return null}}else{var d=b.url.indexOf("*");if(b.url!==c.url&&d===-1||!new RegExp(b.url.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&").replace(/\*/g,".+")).test(c.url)){return null}}if(b.data&&c.data){if(!i(b.data,c.data)){return null}}if(b&&b.type&&b.type.toLowerCase()!=c.type.toLowerCase()){return null}return b}function l(c,d,e){var f=function(b){return function(){return function(){var b;this.status=c.status;this.statusText=c.statusText;this.readyState=4;if(a.isFunction(c.response)){c.response(e)}if(d.dataType=="json"&&typeof c.responseText=="object"){this.responseText=JSON.stringify(c.responseText)}else if(d.dataType=="xml"){if(typeof c.responseXML=="string"){this.responseXML=g(c.responseXML);this.responseText=c.responseXML}else{this.responseXML=c.responseXML}}else{this.responseText=c.responseText}if(typeof c.status=="number"||typeof c.status=="string"){this.status=c.status}if(typeof c.statusText==="string"){this.statusText=c.statusText}b=this.onreadystatechange||this.onload;if(a.isFunction(b)){if(c.isTimeout){this.status=-1}b.call(this,c.isTimeout?"timeout":undefined)}else if(c.isTimeout){this.status=-1}}.apply(b)}}(this);if(c.proxy){b({global:false,url:c.proxy,type:c.proxyType,data:c.data,dataType:d.dataType==="script"?"text/plain":d.dataType,complete:function(a){c.responseXML=a.responseXML;c.responseText=a.responseText;if(j(c,"status")){c.status=a.status}if(j(c,"statusText")){c.statusText=a.statusText}this.responseTimer=setTimeout(f,c.responseTime||0)}})}else{if(d.async===false){f()}else{this.responseTimer=setTimeout(f,c.responseTime||50)}}}function m(b,c,d,e){b=a.extend(true,{},a.mockjaxSettings,b);if(typeof b.headers==="undefined"){b.headers={}}if(b.contentType){b.headers["content-type"]=b.contentType}return{status:b.status,statusText:b.statusText,readyState:1,open:function(){},send:function(){e.fired=true;l.call(this,b,c,d)},abort:function(){clearTimeout(this.responseTimer)},setRequestHeader:function(a,c){b.headers[a]=c},getResponseHeader:function(a){if(b.headers&&b.headers[a]){return b.headers[a]}else if(a.toLowerCase()=="last-modified"){return b.lastModified||(new Date).toString()}else if(a.toLowerCase()=="etag"){return b.etag||""}else if(a.toLowerCase()=="content-type"){return b.contentType||"text/plain"}},getAllResponseHeaders:function(){var c="";a.each(b.headers,function(a,b){c+=a+": "+b+"\n"});return c}}}function n(a,b,c){o(a);a.dataType="json";if(a.data&&e.test(a.data)||e.test(a.url)){q(a,b,c);var d=/^(\w+:)?\/\/([^\/?#]+)/,f=d.exec(a.url),g=f&&(f[1]&&f[1]!==location.protocol||f[2]!==location.host);a.dataType="script";if(a.type.toUpperCase()==="GET"&&g){var h=p(a,b,c);if(h){return h}else{return true}}}return null}function o(a){if(a.type.toUpperCase()==="GET"){if(!e.test(a.url)){a.url+=(/\?/.test(a.url)?"&":"?")+(a.jsonp||"callback")+"=?"}}else if(!a.data||!e.test(a.data)){a.data=(a.data?a.data+"&":"")+(a.jsonp||"callback")+"=?"}}function p(b,c,d){var e=d&&d.context||b,f=null;if(c.response&&a.isFunction(c.response)){c.response(d)}else{if(typeof c.responseText==="object"){a.globalEval("("+JSON.stringify(c.responseText)+")")}else{a.globalEval("("+c.responseText+")")}}r(b,e,c);s(b,e,c);if(a.Deferred){f=new a.Deferred;if(typeof c.responseText=="object"){f.resolveWith(e,[c.responseText])}else{f.resolveWith(e,[a.parseJSON(c.responseText)])}}return f}function q(a,b,c){var d=c&&c.context||a;var g=a.jsonpCallback||"jsonp"+f++;if(a.data){a.data=(a.data+"").replace(e,"="+g+"$1")}a.url=a.url.replace(e,"="+g+"$1");window[g]=window[g]||function(c){data=c;r(a,d,b);s(a,d,b);window[g]=undefined;try{delete window[g]}catch(e){}if(head){head.removeChild(script)}}}function r(a,b,c){if(a.success){a.success.call(b,c.responseText||"",status,{})}if(a.global){h(a,"ajaxSuccess",[{},a])}}function s(b,c){if(b.complete){b.complete.call(c,{},status)}if(b.global){h("ajaxComplete",[{},b])}if(b.global&&!--a.active){a.event.trigger("ajaxStop")}}function t(e,f){var g,h,i;if(typeof e==="object"){f=e;e=undefined}else{f.url=e}h=a.extend(true,{},a.ajaxSettings,f);for(var j=0;j<c.length;j++){if(!c[j]){continue}i=k(c[j],h);if(!i){continue}d.push(h);a.mockjaxSettings.log(i,h);if(h.dataType==="jsonp"){if(g=n(h,i,f)){return g}}i.cache=h.cache;i.timeout=h.timeout;i.global=h.global;u(i,f);(function(c,d,e,f){g=b.call(a,a.extend(true,{},e,{xhr:function(){return m(c,d,e,f)}}))})(i,h,f,c[j]);return g}if(a.mockjaxSettings.throwUnmocked===true){throw"AJAX not mocked: "+f.url}else{return b.apply(a,[f])}}function u(a,b){if(!(a.url instanceof RegExp)){return}if(!a.hasOwnProperty("urlParams")){return}var c=a.url.exec(b.url);if(c.length===1){return}c.shift();var d=0,e=c.length,f=a.urlParams.length,g=Math.min(e,f),h={};for(d;d<g;d++){var i=a.urlParams[d];h[i]=c[d]}b.urlParams=h}a.extend({ajax:t});a.mockjaxSettings={log:function(b,c){if(b.logging===false||typeof b.logging==="undefined"&&a.mockjaxSettings.logging===false){return}if(window.console&&console.log){var d="MOCK "+c.type.toUpperCase()+": "+c.url;var e=a.extend({},c);if(typeof console.log==="function"){console.log(d,e)}else{try{console.log(d+" "+JSON.stringify(e))}catch(f){console.log(d)}}}},logging:true,status:200,statusText:"OK",responseTime:500,isTimeout:false,throwUnmocked:false,contentType:"text/plain",response:"",responseText:"",responseXML:"",proxy:"",proxyType:"GET",lastModified:null,etag:"",headers:{etag:"IJF@H#@923uf8023hFO@I#H#","content-type":"text/plain"}};a.mockjax=function(a){var b=c.length;c[b]=a;return b};a.mockjaxClear=function(a){if(arguments.length==1){c[a]=null}else{c=[]}d=[]};a.mockjax.handler=function(a){if(arguments.length==1){return c[a]}};a.mockjax.mockedAjaxCalls=function(){return d}})(jQuery);define("third-party/jquery.mockjax",function(){});(function(){define("dashboard/mockjax",["third-party/jquery.mockjax"],function(){jQuery.mockjaxSettings.contentType="text/json";jQuery.mockjaxSettings.responseTime=250;jQuery.mockjax({url:""+baseUrl+"/api/dashboards/details",responseText:JSON.stringify({name:"Helicopter View",description:"",shared:true,layout:"50%-50%",canManageWidgets:true,widgets:[{id:1,key:"measure_filter_list",name:"Measure Filter as List",properties:[{key:"filter",value:48}],layout:{column:1,row:1}},{id:2,key:"my_reviews",name:"My Unresolved Issues",properties:[{key:"numberOfLines",value:5}],layout:{column:1,row:2}},{id:3,key:"hotspot_most_violated_rules",name:"Most Violated Rules",properties:[{key:"numberOfLines",value:5}],layout:{column:2,row:1}}]})});jQuery.mockjax({url:""+baseUrl+"/api/dashboards/widgets",responseText:JSON.stringify({widgets:[{key:"action_plans",name:"Action Plans",description:"Shows all the open action plans of the project."},{key:"complexity",name:"Complexity",description:"Reports on complexity, average complexity and complexity distribution."},{key:"custom_measures",name:"Custom Measures",description:"Displays a list of selected measures.",category:""}]})});return jQuery.mockjax({url:""+baseUrl+"/api/dashboards/configure_widget",responseText:JSON.stringify({widget:{key:"measure_filter_list",properties:[{key:"filter",value:48,type:"FILTER",optional:false,options:{39:"My favourites",86:"Nemo &amp; Dory",36:"New recent issues by developer",37:"New recent violations by project",54:"Projects",50:"Projects Activity since last version",38:"Projects Treemap",49:"Projects by license",100:"Projects not analyzed since 2 days",82:"Quality Gate",57:"Super Heroes with new issues",32:"Super Heroes",48:"Teams"}},{key:"pageSize",type:"INTEGER",defaultValue:"30",optional:true},{key:"displayFilterDescription",type:"BOOLEAN",defaultValue:"false",optional:true}]}})},jQuery.mockjax({url:""+baseUrl+"/api/dashboards/save_widget",responseText:JSON.stringify({widget:{key:"measure_filter_list",name:"Measure Filter as List",properties:[{key:"filter",value:48}],layout:{column:1,row:1}}},jQuery.mockjax({url:""+baseUrl+"/api/dashboards/save",responseText:JSON.stringify({status:"ok"})}))}))})}).call(this);(function(){requirejs.config({baseUrl:""+baseUrl+"/js"});requirejs(["dashboard/collections/widgets","dashboard/views/widgets-view","dashboard/mockjax"],function(a,b){var c,d,e;c=jQuery;d=new Marionette.Application;d.dashboard=window.did;d.resource=window.resource;d.state=new Backbone.Model({configure:false});d.saveDashboard=function(){var a,b;b=this.widgetsView.getLayout();a={did:d.dashboard.id,layout:b};return c.post(""+baseUrl+"/api/dashboards/save",a)};d.addInitializer(function(){this.widgetsView=new b({collection:this.widgets,dashboard:this.dashboard,el:c("#dashboard"),app:this});return this.widgetsView.render()});e=function(){return c.get(""+baseUrl+"/api/dashboards/show",{key:d.dashboard},function(b){d.dashboard=new Backbone.Model(_.omit(b,"widgets"));return d.widgets=new a(b.widgets)})};return c.when(e(),window.requestMessages()).done(function(){return d.start()})})}).call(this);define("dashboard/app",function(){});